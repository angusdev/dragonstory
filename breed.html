<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="jquery.xdomainajax.ellab-1.0.js"></script>
<script src="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/js/bootstrap.min.js"></script>
<script>
var backupJqueryReady = jQuery.ready;
jQuery.ready = $.Deferred();
</script>
<script src="http://dragon-story.wikia.com/index.php?title=MediaWiki:BreedingCalculator.js&amp;action=raw&amp;ctype=text/javascript"></script>
<script>
jQuery.ready = backupJqueryReady;
backupJqueryReady = null;
</script>
<script src="dragonstory.js"></script>
<link rel="stylesheet" type="text/css" href="http://netdna.bootstrapcdn.com/bootstrap/3.0.2/css/bootstrap.min.css">
<style>
.container {
  width: 100%;
}
</style>
</head>
<body>
<div class="container">
  <div class="form-group">
  </div>
  <div class="form-group">
    Dragon 1
    <div class="btn-group btn-group-s" data-toggle="buttons" data-role="dragon-prefix-btn-group" data-radio-name="breeddragonprefix1" data-for="#breed-dragon-list-1"></div>
  </div>
  <div class="form-group">
    <span style="margin-left: 100px;">Select a dragon first</span>
    <div class="btn-group btn-group-s" data-toggle="buttons" data-role="dragon-name-btn-group" data-radio-name="breeddragonname1" id="breed-dragon-list-1"></div>
  </div>
  <div class="form-group">
    Dragon 2
    <div class="btn-group btn-group-s" data-toggle="buttons" data-role="dragon-prefix-btn-group" data-radio-name="breeddragonprefix2" data-for="#breed-dragon-list-2"></div>
  </div>
  <div class="form-group">
    <span style="margin-left: 100px;">Select a dragon first</span>
    <div class="btn-group btn-group-s" data-toggle="buttons" data-role="dragon-name-btn-group" data-radio-name="breeddragonname2" id="breed-dragon-list-2"></div>
  </div>
  <div class="form-group" style="margin-top:10px;">
    <div id="breed-result" data-role="result"></div>
  </div>
</div>

<div style="display:none;">
  <select id="breeddragons_dragon1choices"></select>
  <select id="breeddragons_dragon2choices"><select>
  <select id="breeddragons_incubationchoices"></select>
  <select id="breeddragons_levelchoices"></select>
  <select id="findparents_dragonchoices"></select>
  <div id="breedingcalculatordata"></div>
  <div id="breeddragons"></div>
  <div id="findparents"></div>
  <div id="content_breeddragons"></div>
</div>
</body>
<script>
$(document).ready(function() {
  var ds = org.ellab.dragonstory;

  ds.loadBreedData().done(function(data) {
    // I know, I know this is dangerous
    eval(data);

    buildDataLists();
    setMenuOptions();
    ds.makeDragonBtn();
    ds.makeLevelBtn();

    // click the dragon or level
    $(document).on('change', '#breed-dragon-list-1 :radio, #breed-dragon-list-2 :radio', function() {
      var dragonid1 = $('#breed-dragon-list-1 :checked').val();
      var dragonid2 = $('#breed-dragon-list-2 :checked').val();
      if (dragonid1 && dragonid2) {
        // fill in the hidden element used by the function
        $('#breeddragons_dragon1choices option').filter(function() { return this.textContent === breeds[dragonid1].name }).prop('selected', true);
        $('#breeddragons_dragon2choices option').filter(function() { return this.textContent === breeds[dragonid2].name }).prop('selected', true);
        getBreedingOutcome();

        // show the hidden result, remove all inline style
        $('#breed-result')
          .html($('#content_breeddragons').html())
          .find('table')
            .attr('style', '')
            .addClass("table table-striped table-condensed table-bordered")
            .find('th')
              .attr('style', 'text-align:center;');
      }
    });
  });
});
</script>
</html>
